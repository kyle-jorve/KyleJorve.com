/*==========----------==========*/
/*       SUBHERO FEATURES       */
/*==========----------==========*/
.featuresWrp{
    margin-top:calc((6em + 300px) * -1);
    margin-bottom:6em;

    .flexContainer{
        @include sbFlexWrap(row, wrap, center, stretch, stretch, true);
    }
    .featureItem{
        width:calc((100% / 3) - 2em);
        max-width:400px;
        margin:0 1em;
        padding-bottom:6em;
        background:map-get($bgColors, bodyBg);
        box-shadow:$mediumShadow;
        color:$lightTextColor;
        position:relative;
    }
    .featureIconWrp{
        height:7em;
        padding:1.5em 4em;
        background:map-get($colorScheme, accentColor);
        svg{
            fill:$darkTextColor;
            height:100%;
            width:auto;
            margin:0 auto;
        }
    }
    .featureContent{
        padding:1.5em;
        h3{
            text-align:center;
        }
    }
    .button{
        position:absolute;
        bottom:3em;
        left:50%;
        @include transform("translateX(-50%)");
    }
}

/*==========----------==========*/
/*       SYSTEM FEATURES        */
/*==========----------==========*/
.sysFeaturesWrp{
    position:relative;

    .sysFeatures{
        @include sbFlexWrap(row, wrap, center, stretch);
        opacity:1;
        @include filter("none");
        position:relative;
        z-index:1;
        @include transition(all, .5s, ease);
    }

    .sysFeatureItem{
        cursor:pointer;
        width:100%;
        max-width:360px;
        min-height:360px;
        padding:2em;
        text-align:center;
        position:relative;
        z-index:1;
        /*@include transition;*/
        
        & > *{
            position:relative;
            z-index:2;
        }

    }

    .buttonWrp{
        opacity:1;
        visibility:visible;
        margin-top:2em;
        @include filter("none");
        @include transition(all, .5s, ease);
    }

    /*---------- ICONS ----------*/

    .sysFeatIconWrp{
        margin-top:2em;

        svg{
            fill:$linkColor;
            width:auto;
            height:auto;
            max-width:180px;
            max-height:140px;
            margin:0 auto;
            @include transition;
        }
    }

    /*---------- DETAIL CONTENT (hidden) ----------*/

    .sysFeatContentWrp{
        opacity:0;
        visibility:hidden;
        @extend %absolute-cover;
        z-index:2;
        @include transition(all, .5s, ease);

        .closeBtn{
            position:absolute;
            top:0;
            right:0;
            z-index:2;
        }

        .sysFeatIconWrp{
            margin:2em 0;
        }

        .sysFeatOverlay{
            display:none;
            background:map-get($bgColors, bodyBg);
            opacity:0;
            visibility:hidden;
            @extend %absolute-cover;
            z-index:1;
        }
    }

    .sysFeatContentInnerWrp{
        @include sbFlexWrap(column, nowrap, center, center);
        @extend %absolute-cover;
        z-index:2;
    }

    .sysFeatContent{
        display:none;
        padding:2em;
        max-width:$narrowWidth;
        max-height:100%;
        margin:0 auto;
        overflow-x:hidden;
        overflow-y:auto;
        position:relative;
        z-index:2;

        h3{
            text-align:center;
        }

        .button{
            display:block;
            max-width:200px;
            margin:3em auto 0 auto;
        }
    }
}

/*---------- SCROLL BARS ----------*/
@include scrollBar(".sysFeatContent", vertical);

/*---------- DETAIL CONTENT (revealed) ----------*/

.revealFeatContent .sysFeaturesWrp{
    .buttonWrp{
        opacity:0;
        visibility:hidden;
        @include filter("blur(15px)");
    }

    .sysFeatures{
        opacity:.15;
        @include filter("blur(15px)");
    }
    .sysFeatContentWrp{
        opacity:1;
        visibility:visible;

        .sysFeatOverlay{
            opacity:1;
            visibility:visible;
        }
    }
}

/*---------- BORDERS ----------*/

.topBorders,
.bottomBorders{
    pointer-events:none;
    height:25%;
    max-height:100px;
    position:absolute !important;
    left:$borderThickness / 2 * -1;
    right:$borderThickness / 2 * -1;
    z-index:3 !important;

    &:before,
    &:after{
        display:block;
        content:'';
        width:25%;
        max-width:100px;
        height:100%;
        position:absolute;
        top:0;
        bottom:0;
        @include transition;
    }

    &:before{
        left:0;
    }

    &:after{
        right:0;
    }
}

.topBorders{
    top:$borderThickness / 2 * -1;

    &:before{
        border-top:$borderThickness solid $lightTextColor;
        border-left:$borderThickness solid $lightTextColor;
    }

    &:after{
        border-top:$borderThickness solid $lightTextColor;
        border-right:$borderThickness solid $lightTextColor;
    }
}

.bottomBorders{
    bottom:$borderThickness / 2 * -1;

    &:before{
        border-bottom:$borderThickness solid $lightTextColor;
        border-left:$borderThickness solid $lightTextColor;
    }

    &:after{
        border-bottom:$borderThickness solid $lightTextColor;
        border-right:$borderThickness solid $lightTextColor;
    }
}

.sysFeatContentWrp{
    .topBorders,
    .bottomBorders{
        left:0;
        right:0;
    }
    .topBorders{
        top:0;
    }
    .bottomBorders{
        bottom:0;
    }
}

/*---------- HOVER EFFECTS ----------*/

@include hover(".sysFeaturesWrp .sysFeatureItem"){
    background:map-get($bgColors, medContentBg);
    color:map-get($colorScheme, accentColor);
    z-index:2;
    .topBorders,
    .bottomBorders{
        &:before,
        &:after{
            border-color:map-get($colorScheme, accentColor);
        }
    }
}